/* PRINTMATE - Shops page
   Amazon-style expandable product cards.
   This file is intentionally page-scoped and loaded AFTER theme.css. */

.shops-page {
  padding-bottom: 8px;
}

/* Use a single-column "product list" like Amazon (prevents awkward grid gaps during expansion). */
.shop-grid {
  display: grid;
  gap: 16px;
  max-width: 980px;
  margin: 0 auto;
}

.shop-card {
  --shop-hue: 170; /* overridden per-card in JS */
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 18px;
  box-shadow: var(--shadow);
  overflow: hidden;
  transition: transform 180ms ease, box-shadow 180ms ease, border-color 180ms ease;
}

.shop-card:hover {
  transform: translateY(-2px);
  border-color: rgba(15, 118, 110, 0.35);
}

.shop-card.is-expanded {
  border-color: rgba(15, 118, 110, 0.55);
  box-shadow: 0 26px 55px rgba(15, 23, 42, 0.12);
}

/* Summary (collapsed view) */
.shop-card__summary {
  width: 100%;
  background: transparent;
  border: 0;
  padding: 14px;
  text-align: left;
  cursor: pointer;
  display: grid;
  grid-template-columns: 120px 1fr 22px;
  grid-template-areas: "media main chevron";
  gap: 14px;
  align-items: center;
  color: inherit;
  font: inherit;
}

.shop-card__summary:focus-visible {
  outline: 3px solid rgba(15, 118, 110, 0.35);
  outline-offset: 3px;
  border-radius: 16px;
}

.shop-card__media {
  grid-area: media;
  width: 120px;
  height: 92px;
  border-radius: 14px;
  border: 1px solid rgba(15, 23, 42, 0.08);
  background-image:
    linear-gradient(135deg, hsla(var(--shop-hue), 70%, 45%, 0.35), rgba(249, 115, 22, 0.18)),
    url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22800%22%20height%3D%22500%22%20viewBox%3D%220%200%20800%20500%22%3E%0A%20%20%3Cdefs%3E%0A%20%20%20%20%3ClinearGradient%20id%3D%22g%22%20x1%3D%220%22%20y1%3D%220%22%20x2%3D%221%22%20y2%3D%221%22%3E%0A%20%20%20%20%20%20%3Cstop%20offset%3D%220%22%20stop-color%3D%22%230f766e%22%2F%3E%0A%20%20%20%20%20%20%3Cstop%20offset%3D%221%22%20stop-color%3D%22%23f97316%22%2F%3E%0A%20%20%20%20%3C%2FlinearGradient%3E%0A%20%20%3C%2Fdefs%3E%0A%20%20%3Crect%20width%3D%22800%22%20height%3D%22500%22%20fill%3D%22url(%23g)%22%20opacity%3D%220.22%22%2F%3E%0A%20%20%3Cg%20fill%3D%22none%22%20stroke%3D%22%230f172a%22%20stroke-width%3D%2218%22%20opacity%3D%220.55%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%0A%20%20%20%20%3Crect%20x%3D%22220%22%20y%3D%22170%22%20width%3D%22360%22%20height%3D%22170%22%20rx%3D%2226%22%2F%3E%0A%20%20%20%20%3Crect%20x%3D%22260%22%20y%3D%2295%22%20width%3D%22280%22%20height%3D%22120%22%20rx%3D%2218%22%2F%3E%0A%20%20%20%20%3Crect%20x%3D%22260%22%20y%3D%22305%22%20width%3D%22280%22%20height%3D%22120%22%20rx%3D%2218%22%2F%3E%0A%20%20%20%20%3Cpath%20d%3D%22M280%20365H520%22%2F%3E%0A%20%20%20%20%3Cpath%20d%3D%22M280%20410H480%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E");
  background-size: cover;
  background-position: center;
}

.shop-card__main {
  grid-area: main;
  display: grid;
  gap: 6px;
  min-width: 0;
}

.shop-card__top {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 10px;
}

.shop-card__title {
  font-size: 18px;
  font-weight: 700;
  line-height: 1.2;
  margin: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.shop-card__tag {
  flex: 0 0 auto;
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  white-space: nowrap;
  border: 1px solid rgba(15, 23, 42, 0.08);
}

.shop-card__tag.is-open {
  background: rgba(16, 185, 129, 0.16);
  color: #065f46;
}

.shop-card__tag.is-busy {
  background: rgba(239, 68, 68, 0.14);
  color: #7f1d1d;
}

.shop-card__desc {
  margin: 0;
  color: var(--muted);
  font-size: 14px;
  line-height: 1.5;
}

.shop-card__meta {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 2px;
}

.shop-card__meta-item {
  font-size: 12px;
  color: var(--muted);
  padding: 4px 8px;
  border-radius: 999px;
  background: rgba(15, 23, 42, 0.04);
  border: 1px solid rgba(15, 23, 42, 0.06);
}

.shop-card__chevron {
  grid-area: chevron;
  width: 22px;
  height: 22px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  color: rgba(15, 23, 42, 0.55);
  transition: transform 180ms ease;
}

.shop-card__chevron::before {
  content: "";
  width: 8px;
  height: 8px;
  border-right: 2px solid currentColor;
  border-bottom: 2px solid currentColor;
  transform: rotate(45deg);
}

.shop-card.is-expanded .shop-card__chevron {
  transform: rotate(180deg);
}

/* Expanded content (animated height is managed by JS). */
.shop-card__details {
  height: 0;
  overflow: hidden;
  opacity: 0;
  border-top: 1px solid var(--border);
  background: rgba(248, 250, 252, 0.9);
  transition: height 260ms ease, opacity 180ms ease;
  will-change: height;
}

.shop-card.is-expanded .shop-card__details {
  opacity: 1;
}

.shop-card__details-inner {
  padding: 14px 14px 16px;
  display: grid;
  gap: 12px;
}

.shop-card__info-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
}

.shop-card__info-item {
  background: white;
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 12px;
}

.shop-card__info-label {
  display: block;
  font-size: 11px;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted);
}

.shop-card__info-value {
  margin-top: 6px;
  font-weight: 700;
  color: var(--text);
  word-break: break-word;
}

.shop-card__pricing {
  background: white;
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 12px;
  display: grid;
  gap: 10px;
}

.shop-card__section-title {
  font-weight: 800;
  font-size: 14px;
}

.shop-card__pricing-row {
  display: flex;
  justify-content: space-between;
  gap: 12px;
  color: var(--text);
  font-weight: 700;
}

.shop-card__pricing-row span:last-child {
  color: var(--muted);
  font-weight: 800;
}

.shop-card__actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  align-items: center;
}

.shop-card__hint {
  font-size: 12px;
  color: var(--muted);
}

.shop-card__order-btn[disabled] {
  opacity: 0.7;
  cursor: not-allowed;
}

@media (max-width: 720px) {
  .shop-card__info-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 640px) {
  .shop-card__summary {
    grid-template-columns: 1fr;
    grid-template-areas:
      "media"
      "main"
      "chevron";
    align-items: start;
  }

  .shop-card__media {
    width: 100%;
    height: 160px;
  }

  .shop-card__chevron {
    justify-self: end;
  }

  .shop-card__actions {
    justify-content: stretch;
  }

  .shop-card__order-btn {
    width: 100%;
  }
}

@media (prefers-reduced-motion: reduce) {
  .shop-card,
  .shop-card__details,
  .shop-card__chevron {
    transition: none !important;
  }
}

